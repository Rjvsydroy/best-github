<div class="container">
  <h1>Add Prescription</h1>
  <form [formGroup]="form" (ngSubmit)="submit()">
    <div class="row">
      <div class="form-group col-4">
        <label for="patientId">Patient</label>
        <select class="form-control" id="patientId" formControlName="patientId">
          <option *ngFor="let patient of patients" [value]="patient.id">{{patient.lastName}}, {{patient.firstName}}</option>
        </select>
      </div>
      <div class="form-group col-4">
        <label for="medicationName">Medication Name</label>
        <input class="form-control" type="text" id="medicationName" formControlName="medicationName" />
      </div>
      <div class="form-group col-4">
        <label for="medicationNumber">Medication Number</label>
        <input class="form-control" type="text" id="medicationNumber" formControlName="medicationNumber" />
      </div>
    </div>

    <button class="btn btn-secondary" type="button" (click)="addSchedule()">Add Schedule</button>

    <div formArrayName="schedule">
      <div *ngFor="let _ of schedule.controls; let i = index">
        <ng-container [formGroupName]="i">
          <div class="row">
            <div class="form-group col-4">
              <label for="timeOfDay">Time of Day</label>
              <input class="form-control" type="time" id="timeOfDay" formControlName="timeOfDay" />
            </div>

            <div class="form-group col-4">
              <label for="unitsToAdminister">Units to Administer</label>
              <input class="form-control" type="text" id="unitsToAdminister" formControlName="unitsToAdminister">
            </div>
          </div>

          <button class="btn btn-dark" (click)="removeSchedule(i)">Remove</button>
          <hr/>
        </ng-container>
      </div>
    </div>

    <button type="submit" class="btn btn-success" [disabled]="form.invalid">Save</button>
  </form>
</div>
